<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å—É—Ç–æ—á–Ω–æ–π –Ω–æ—Ä–º—ã –∫–∞–ª–æ—Ä–∏–π (DCI)</title>
    <style>
        :root {
            --primary-color: #4a8eff;
            --secondary-color: #ff7e5f;
            --accent-color: #2ecc71;
            --light-bg: #f8f9fa;
            --dark-text: #333;
            --light-text: #666;
            --border-radius: 10px;
            --box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f0f2f5;
            color: var(--dark-text);
            line-height: 1.6;
            padding: 15px;
        }
        
        .container {
            max-width: 1050px;
            margin: 0 auto;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary-color), #2b6cb0);
            color: white;
            padding: 20px 15px;
            text-align: center;
        }
        
        h1 {
            font-size: 24px;
            margin-bottom: 8px;
        }
        
        .subtitle {
            font-size: 14px;
            opacity: 0.9;
        }
        
        .calculator-container {
            display: flex;
            flex-wrap: wrap;
            padding: 15px;
        }
        
        .form-section {
            flex: 1;
            min-width: 100%;
            padding: 15px;
        }
        
        .result-section {
            flex: 1;
            min-width: 100%;
            padding: 15px;
            background-color: var(--light-bg);
            border-radius: var(--border-radius);
            margin-top: 15px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600;
            color: var(--dark-text);
        }
        
        input, select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            font-size: 16px;
        }
        
        .formula-selector {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 15px;
        }
        
        .formula-btn {
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: var(--border-radius);
            background: white;
            cursor: pointer;
            text-align: center;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .formula-btn.active {
            border-color: var(--primary-color);
            background-color: #e8f4ff;
            color: var(--primary-color);
        }
        
        .profile-data {
            background-color: #e8f4ff;
            padding: 12px;
            border-radius: var(--border-radius);
            margin-bottom: 15px;
        }
        
        .profile-data-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6px;
            font-size: 14px;
        }
        
        .profile-data-label {
            font-weight: 600;
        }
        
        .profile-warning {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 12px;
            border-radius: var(--border-radius);
            margin-bottom: 15px;
            font-size: 14px;
        }
        
        .disclaimer {
            background-color: #fff3f3;
            border: 1px solid #ffcccc;
            border-radius: var(--border-radius);
            padding: 12px;
            margin: 15px 0;
            color: #d63384;
            font-size: 14px;
        }
        
        .disclaimer h4 {
            margin-bottom: 8px;
            color: #d63384;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 16px;
        }
        
        .disclaimer ul {
            margin-left: 15px;
            margin-bottom: 8px;
        }
        
        .disclaimer li {
            margin-bottom: 4px;
        }
        
        .dietitian-contact {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border-radius: var(--border-radius);
            padding: 15px;
            margin-top: 20px;
            text-align: center;
        }
        
        .dietitian-contact h3 {
            color: #1976d2;
            margin-bottom: 12px;
            font-size: 18px;
        }
        
        .dietitian-btn {
            background: linear-gradient(to right, #1976d2, #2196f3);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: var(--border-radius);
            font-weight: bold;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            margin-top: 8px;
            font-size: 14px;
        }
        
        .formula {
            background-color: #f8f9fa;
            border-left: 4px solid var(--primary-color);
            padding: 12px;
            margin: 15px 0;
            font-family: monospace;
            font-size: 14px;
            overflow-x: auto;
        }
        
        .formula-line {
            margin-bottom: 6px;
            display: flex;
            flex-wrap: wrap;
        }
        
        .formula-line .label {
            min-width: 60px;
            font-weight: bold;
        }
        
        .formula-line .operation {
            margin: 0 5px;
            flex: 1;
        }
        
        .formula-line .value {
            margin-left: auto;
        }
        
        .formula-description {
            margin-top: 8px;
            font-size: 13px;
            color: var(--light-text);
            font-style: italic;
        }
        
        .calculate-btn {
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            padding: 14px 20px;
            border-radius: var(--border-radius);
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s;
            margin-top: 10px;
        }
        
        .calculate-btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        
        .result-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            text-align: center;
        }
        
        .result-title {
            font-size: 16px;
            color: var(--light-text);
            margin-bottom: 8px;
        }
        
        .result-value {
            font-size: 28px;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .formula-used {
            font-size: 13px;
            color: var(--light-text);
            margin-top: 4px;
        }
        
        .bju-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            margin-top: 20px;
        }
        
        .bju-item {
            flex: 1;
            min-width: 30%;
            text-align: center;
            padding: 10px;
            margin-bottom: 10px;
        }
        
        .bju-title {
            font-size: 13px;
            color: var(--light-text);
            margin-bottom: 4px;
        }
        
        .bju-value {
            font-size: 18px;
            font-weight: bold;
        }
        
        .bju-protein { color: #4a8eff; }
        .bju-fat { color: #ff7e5f; }
        .bju-carbs { color: #2ecc71; }
        
        .bju-percent {
            font-size: 12px;
            color: var(--light-text);
        }
        
        .activity-info {
            margin-top: 15px;
            font-size: 13px;
            color: var(--light-text);
        }
        
        .activity-info pre {
            font-family: inherit;
            white-space: pre-wrap;
            margin-bottom: 5px;
            font-size: 12px;
        }
        /* –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –º–µ–Ω—é */
        .mobile-menu-toggle {
            display: none;
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px;
            border-radius: var(--border-radius);
            width: 100%;
            margin: 10px 0;
            font-weight: bold;
            cursor: pointer;
            position: sticky;
            bottom: 10px;
            z-index: 100;
        }
        
        .footer-nav {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            background: white;
            padding: 12px 0;
            border-radius: var(--border-radius);
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
            margin-top: 15px;
            transition: all 0.3s ease;
        }
        
        /* –°—Ç–∏–ª—å –¥–ª—è —Å–∫—Ä—ã—Ç–æ–≥–æ –º–µ–Ω—é */
        .footer-nav.hidden {
            transform: translateY(100%);
            opacity: 0;
            height: 0;
            padding: 0;
            overflow: hidden;
        }
        
        /* –°—Ç–∏–ª—å –¥–ª—è –ø–æ–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –º–µ–Ω—é */
        .footer-nav.visible {
            transform: translateY(0);
            opacity: 1;
            height: auto;
            padding: 12px 0;
        }
        
        /* –£–ª—É—á—à–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∏–∫–æ–Ω–æ–∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ */
        .nav-item {
            text-align: center;
            font-size: 12px;
            color: #666;
            text-decoration: none;
            flex: 1;
            min-width: 60px;
            padding: 8px 5px;
            transition: all 0.2s;
        }
        
        .nav-item:hover {
            background-color: #f0f8ff;
            border-radius: 8px;
        }
        
        .nav-item.active {
            color: #0078d7;
            font-weight: 500;
        }
        
        .nav-item div {
            font-size: 20px;
            margin-bottom: 4px;
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –±–æ–ª—å—à–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
        @media (min-width: 768px) {
            .mobile-menu-toggle {
                display: none !important;
            }
            
            .footer-nav {
                display: flex !important;
                transform: none !important;
                opacity: 1 !important;
                height: auto !important;
                padding: 12px 0 !important;
            }
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
        @media (max-width: 767px) {
            .mobile-menu-toggle {
                display: block;
            }
            
            .footer-nav {
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                border-radius: 15px 15px 0 0;
                z-index: 99;
                margin-top: 0;
                box-shadow: 0 -4px 15px rgba(0,0,0,0.15);
            }
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
        @media (max-width: 360px) {
            .nav-item {
                min-width: 50px;
                font-size: 11px;
                padding: 6px 3px;
            }
            
            .nav-item div {
                font-size: 18px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å—É—Ç–æ—á–Ω–æ–π –Ω–æ—Ä–º—ã –∫–∞–ª–æ—Ä–∏–π (DCI)</h1>
            <p class="subtitle">–†–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ –≤–∞—à—É –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—É—é –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –≤ –∫–∞–ª–æ—Ä–∏—è—Ö –∏ –ë–ñ–£</p>
        </header>
        
        <div class="calculator-container">
            <div class="form-section">
                <h2>–í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ</h2>
                
                <!-- –ë–ª–æ–∫ —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º –æ –Ω–µ—Ç–æ—á–Ω–æ—Å—Ç–∏ -->
                <div class="disclaimer">
                    <h4>‚ö†Ô∏è –í–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h4>
                    <p>–î–∞–Ω–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç <strong>–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω—ã–µ</strong> –∑–Ω–∞—á–µ–Ω–∏—è. –†–µ–∞–ª—å–Ω—ã–µ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ –º–æ–≥—É—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –∏–∑-–∑–∞:</p>
                    <ul>
                        <li>–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π –º–µ—Ç–∞–±–æ–ª–∏–∑–º–∞</li>
                        <li>–°–æ—Å—Ç–æ—è–Ω–∏—è –∑–¥–æ—Ä–æ–≤—å—è –∏ –ø—Ä–∏–µ–º–∞ medications</li>
                        <li>–£—Ä–æ–≤–Ω—è –≥–æ—Ä–º–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ñ–æ–Ω–∞</li>
                        <li>–°–æ—Å—Ç–∞–≤–∞ —Ç–µ–ª–∞ (—Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –º—ã—à—Ü –∏ –∂–∏—Ä–∞)</li>
                        <li>–¢–æ—á–Ω–æ—Å—Ç–∏ –æ—Ü–µ–Ω–∫–∏ —É—Ä–æ–≤–Ω—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</li>
                    </ul>
                    <p><strong>–î–ª—è —Ç–æ—á–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—É!</strong></p>
                </div>
                
                {% if user and user.weight and user.height and user.age and user.gender %}
                <div class="profile-data">
                    <h3>–î–∞–Ω–Ω—ã–µ –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è</h3>
                    <div class="profile-data-item">
                        <span class="profile-data-label">–í–µ—Å:</span>
                        <span id="profile-weight">{{ user.weight }} –∫–≥</span>
                    </div>
                    <div class="profile-data-item">
                        <span class="profile-data-label">–†–æ—Å—Ç:</span>
                        <span id="profile-height">{{ user.height }} —Å–º</span>
                    </div>
                    <div class="profile-data-item">
                        <span class="profile-data-label">–í–æ–∑—Ä–∞—Å—Ç:</span>
                        <span id="profile-age">{{ user.age }} –ª–µ—Ç</span>
                    </div>
                    <div class="profile-data-item">
                        <span class="profile-data-label">–ü–æ–ª:</span>
                        <span id="profile-gender">
                            {% if user.gender == 'female' %}–ñ–µ–Ω—Å–∫–∏–π{% else %}–ú—É–∂—Å–∫–æ–π{% endif %}
                        </span>
                    </div>
                </div>
                {% else %}
                <div class="profile-warning">
                    <p><strong>–ü—Ä–æ—Ñ–∏–ª—å –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é!</strong></p>
                    <p>–î–ª—è —Ä–∞—Å—á–µ—Ç–∞ DCI –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ –ø—Ä–æ—Ñ–∏–ª–µ (–≤–µ—Å, —Ä–æ—Å—Ç, –≤–æ–∑—Ä–∞—Å—Ç, –ø–æ–ª).</p>
                    <a href="{{ url_for('profile') }}" class="calculate-btn" style="display: block; text-align: center; margin-top: 10px;">
                        –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø—Ä–æ—Ñ–∏–ª—å
                    </a>
                </div>
                {% endif %}
                
                <div class="form-group">
                    <label for="formula">–§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á–µ—Ç–∞</label>
                    <div class="formula-selector">
                        <div class="formula-btn active" data-formula="mifflin">
                            –ú–∏—Ñ—Ñ–ª–∏–Ω-–°–∞–Ω –ñ–µ–æ—Ä
                        </div>
                        <div class="formula-btn" data-formula="harris">
                            –•–∞—Ä—Ä–∏—Å-–ë–µ–Ω–µ–¥–∏–∫—Ç
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="activity">–£—Ä–æ–≤–µ–Ω—å —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</label>
                    <select id="activity">
                        <option value="1.2">–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è (—Å–∏–¥—è—á–∏–π –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏)</option>
                        <option value="1.375">–ù–∏–∑–∫–∞—è (–ª–µ–≥–∫–∏–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ 1-3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é)</option>
                        <option value="1.55">–£–º–µ—Ä–µ–Ω–Ω–∞—è (—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ 3-5 —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é)</option>
                        <option value="1.725">–í—ã—Å–æ–∫–∞—è (–∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ 6-7 —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é)</option>
                        <option value="1.9">–û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è (–ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏)</option>
                    </select>
                </div>
                
                {% if user and user.weight and user.height and user.age and user.gender %}
                <h3>–§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á–µ—Ç–∞:</h3>
                <div class="formula" id="formula-display">
                    <!-- –ó–¥–µ—Å—å –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤—ã–±—Ä–∞–Ω–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞ -->
                </div>
                
                <button class="calculate-btn" onclick="calculateDCI()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –Ω–æ—Ä–º—É</button>
                {% endif %}
                
                <!-- –ë–ª–æ–∫ —Å –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏ –¥–∏–µ—Ç–æ–ª–æ–≥–æ–≤ -->
                <div class="dietitian-contact">
                    <h3>üë®‚Äç‚öïÔ∏è –°–æ–≤–µ—Ç</h3>
                    <p>–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ—á–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ø–æ –ø–∏—Ç–∞–Ω–∏—é –∏ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–≥–æ –ø–ª–∞–Ω–∞ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Å–µ—Ä—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É –¥–∏–µ—Ç–æ–ª–æ–≥—É</p>
                    <button class="dietitian-btn" onclick="showDietitianInfo()">
                        –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                    </button>
                </div>
            </div>
            
            <div class="result-section">
                <h2>–í–∞—à–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</h2>
                
                <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö -->
                <div class="disclaimer" style="margin-top: 0;">
                    <h4>üìã –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ</h4>
                    <p>–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —è–≤–ª—è—é—Ç—Å—è <strong>–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω—ã–º–∏</strong>. –î–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –ª—É—á—à–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:</p>
                    <ul>
                        <li>–ù–∞—á–∏–Ω–∞–π—Ç–µ —Å –º–∞–ª–æ–≥–æ –∏ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–π—Ç–µ —Ä–∞—Ü–∏–æ–Ω</li>
                        <li>–°–ª–µ–¥–∏—Ç–µ –∑–∞ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏–µ–º –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º</li>
                        <li>–†–µ–≥—É–ª—è—Ä–Ω–æ –∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä—É–π—Ç–µ—Å—å —Å–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–º</li>
                    </ul>
                </div>
                
                <div class="result-card">
                    <div class="result-title">–°—É—Ç–æ—á–Ω–∞—è –Ω–æ—Ä–º–∞ –∫–∞–ª–æ—Ä–∏–π (DCI)</div>
                    <div class="result-value" id="dci-result">‚Äî</div>
                    <div class="formula-used" id="formula-used">‚Äî</div>
                </div>
                
                <div class="result-card">
                    <div class="result-title">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ –ë–ñ–£ –≤ –¥–µ–Ω—å</div>
                    
                    <div class="bju-container">
                        <div class="bju-item">
                            <div class="bju-title">–ë–ï–õ–ö–ò</div>
                            <div class="bju-value bju-protein" id="protein-value">‚Äî –≥</div>
                            <div class="bju-percent" id="protein-percent">30%</div>
                        </div>
                        
                        <div class="bju-item">
                            <div class="bju-title">–ñ–ò–†–´</div>
                            <div class="bju-value bju-fat" id="fat-value">‚Äî –≥</div>
                            <div class="bju-percent" id="fat-percent">25%</div>
                        </div>
                        
                        <div class="bju-item">
                            <div class="bju-title">–£–ì–õ–ï–í–û–î–´</div>
                            <div class="bju-value bju-carbs" id="carbs-value">‚Äî –≥</div>
                            <div class="bju-percent" id="carbs-percent">45%</div>
                        </div>
                    </div>
                </div>
                
                <div class="activity-info">
                    <p><strong>–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:</strong></p>
                    <ul>
                        <pre>‚Ä¢ 1.2 - –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (—Å–∏–¥—è—á–∞—è —Ä–∞–±–æ—Ç–∞)</pre>
                        <pre>‚Ä¢ 1.375 - –ù–∏–∑–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (–ª–µ–≥–∫–∏–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ 1-3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é)</pre>
                        <pre>‚Ä¢ 1.55 - –£–º–µ—Ä–µ–Ω–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ 3-5 —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é)</pre>
                        <pre>‚Ä¢ 1.725 - –í—ã—Å–æ–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (–∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ 6-7 —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é)</pre>
                        <pre>‚Ä¢ 1.9 - –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (–ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–ø–æ—Ä—Ç)</pre>
                    </ul>
                </div>
            </div>
        </div>

        <button class="mobile-menu-toggle" id="mobileMenuToggle">üìã –ü–æ–∫–∞–∑–∞—Ç—å –º–µ–Ω—é</button>

        <div class="footer-nav hidden" id="footerNav">
            <a href="{{ url_for('index') }}" class="nav-item">
                <div>ü•ó</div>
                <span>–†–∞—Ü–∏–æ–Ω</span>
            </a>
            <a href="{{ url_for('dci') }}" style="color: rgb(10, 169, 222); text-decoration: none;" class="nav-item active">
                <div>‚ö°</div>
                <span>–°–ù–ö</span>
            </a>
            <a href="{{ url_for('stats') }}" class="nav-item">
                <div>üìà</div>
                <span>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</span>
            </a>
            <a href="{{ url_for('bmi') }}" class="nav-item">
                <div>üìä</div>
                <span>–ò–ú–¢</span>
            </a>
            <a href="{{ url_for('profile') }}" class="nav-item">
                <div>üë§</div>
                <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
            </a>
            <a href="{{ url_for('fatsecret_search') }}" class="nav-item">
                <div>üîç</div>
                <span>–ü–æ–∏—Å–∫</span>
            </a>
        </div>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        {% if user and user.weight and user.height and user.age and user.gender %}
        const userData = {
            weight: {{ user.weight }},
            height: {{ user.height }},
            age: {{ user.age }},
            gender: '{{ user.gender }}'
        };
        {% else %}
        const userData = null;
        {% endif %}

        // –¢–µ–∫—É—â–∞—è –≤—ã–±—Ä–∞–Ω–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞
        let selectedFormula = 'mifflin';
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—ã–±–æ—Ä–∞ —Ñ–æ—Ä–º—É–ª—ã
        document.addEventListener('DOMContentLoaded', function() {
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –≤—ã–±–æ—Ä–∞ —Ñ–æ—Ä–º—É–ª—ã
            document.querySelectorAll('.formula-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.formula-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    selectedFormula = this.getAttribute('data-formula');
                    updateFormulaDisplay();
                    
                    if (userData) {
                        calculateDCI();
                    }
                });
            });
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ñ–æ—Ä–º—É–ª—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
            updateFormulaDisplay();
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            if (userData) {
                calculateDCI();
            }
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –º–æ–±–∏–ª—å–Ω–æ–≥–æ –º–µ–Ω—é
            const mobileMenuToggle = document.getElementById('mobileMenuToggle');
            const footerNav = document.getElementById('footerNav');
            
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∏–¥–∏–º–æ—Å—Ç–∏ –º–µ–Ω—é
            function toggleMenu() {
                if (footerNav.classList.contains('hidden')) {
                    footerNav.classList.remove('hidden');
                    footerNav.classList.add('visible');
                    mobileMenuToggle.textContent = '‚úï –°–∫—Ä—ã—Ç—å –º–µ–Ω—é';
                } else {
                    footerNav.classList.remove('visible');
                    footerNav.classList.add('hidden');
                    mobileMenuToggle.textContent = 'üìã –ü–æ–∫–∞–∑–∞—Ç—å –º–µ–Ω—é';
                }
            }
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –ø–æ –∫–Ω–æ–ø–∫–µ –º–µ–Ω—é
            mobileMenuToggle.addEventListener('click', function(e) {
                e.stopPropagation();
                toggleMenu();
            });
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ –æ–±–ª–∞—Å—Ç–∏
            document.addEventListener('click', function(e) {
                if (footerNav.classList.contains('visible') && 
                    !footerNav.contains(e.target) && 
                    e.target !== mobileMenuToggle) {
                    footerNav.classList.remove('visible');
                    footerNav.classList.add('hidden');
                    mobileMenuToggle.textContent = 'üìã –ü–æ–∫–∞–∑–∞—Ç—å –º–µ–Ω—é';
                }
            });
            
            // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–∏—è –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ
            footerNav.addEventListener('click', function(e) {
                e.stopPropagation();
            });
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
            if (window.innerWidth < 768) {
                footerNav.classList.add('hidden');
                footerNav.classList.remove('visible');
                mobileMenuToggle.style.display = 'block';
            } else {
                footerNav.classList.remove('hidden');
                footerNav.classList.add('visible');
                mobileMenuToggle.style.display = 'none';
            }
        });
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
        window.addEventListener('resize', function() {
            const mobileMenuToggle = document.getElementById('mobileMenuToggle');
            const footerNav = document.getElementById('footerNav');
            
            if (window.innerWidth < 768) {
                footerNav.classList.add('hidden');
                footerNav.classList.remove('visible');
                mobileMenuToggle.style.display = 'block';
                mobileMenuToggle.textContent = 'üìã –ü–æ–∫–∞–∑–∞—Ç—å –º–µ–Ω—é';
            } else {
                footerNav.classList.remove('hidden');
                footerNav.classList.add('visible');
                mobileMenuToggle.style.display = 'none';
            }
        });
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –¥–∏–µ—Ç–æ–ª–æ–≥–∞—Ö
        function showDietitianInfo() {
            alert("üë®‚Äç‚öïÔ∏è –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –¥–∏–µ—Ç–æ–ª–æ–≥–∞\n\n–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π –ø–æ–º–æ—â–∏:\n\n‚Ä¢ –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä\n‚Ä¢ –ü–æ—Å–µ—Ç–∏—Ç–µ —Å–∞–π—Ç—ã: nutritionist.ru, docdoc.ru\n‚Ä¢ –ü—Ä–æ–∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä—É–π—Ç–µ—Å—å —Å –≤—Ä–∞—á–æ–º –≤ –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–µ\n\n–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –ø–æ–º–æ–∂–µ—Ç:\n‚Ä¢ –ü–æ–ª—É—á–∏—Ç—å —Ç–æ—á–Ω—ã–π —Ä–∞—Å—á–µ—Ç –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π\n‚Ä¢ –£—á–µ—Å—Ç—å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏\n‚Ä¢ –°–æ—Å—Ç–∞–≤–∏—Ç—å –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –ø–∏—Ç–∞–Ω–∏—è");
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ñ–æ—Ä–º—É–ª—ã
        function updateFormulaDisplay() {
            const formulaDisplay = document.getElementById('formula-display');
            
            if (selectedFormula === 'mifflin') {
                formulaDisplay.innerHTML = `
                    <div class="formula-line">
                        <span class="label">BMR =</span>
                        <span class="operation">(10 √ó –≤–µ—Å) + (6.25 √ó —Ä–æ—Å—Ç) - (5 √ó –≤–æ–∑—Ä–∞—Å—Ç)</span>
                        <span class="operation">${userData.gender === 'female' ? '- 161' : '+ 5'}</span>
                    </div>
                    <div class="formula-line">
                        <span class="label">DCI =</span>
                        <span class="operation">BMR √ó –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</span>
                    </div>
                    <div class="formula-description">
                        –§–æ—Ä–º—É–ª–∞ –ú–∏—Ñ—Ñ–ª–∏–Ω–∞-–°–∞–Ω –ñ–µ–æ—Ä–∞ (—Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è, –±–æ–ª–µ–µ —Ç–æ—á–Ω–∞—è)
                    </div>
                `;
            } else {
                formulaDisplay.innerHTML = `
                    <div class="formula-line">
                        <span class="label">BMR =</span>
                        <span class="operation">${userData.gender === 'female' ? '655.1 + (9.563 √ó –≤–µ—Å) + (1.85 √ó —Ä–æ—Å—Ç) - (4.676 √ó –≤–æ–∑—Ä–∞—Å—Ç)' : '66.5 + (13.75 √ó –≤–µ—Å) + (5.003 √ó —Ä–æ—Å—Ç) - (6.755 √ó –≤–æ–∑—Ä–∞—Å—Ç)'}</span>
                    </div>
                    <div class="formula-line">
                        <span class="label">DCI =</span>
                        <span class="operation">BMR √ó –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</span>
                    </div>
                    <div class="formula-description">
                        –§–æ—Ä–º—É–ª–∞ –•–∞—Ä—Ä–∏—Å–∞-–ë–µ–Ω–µ–¥–∏–∫—Ç–∞ (–∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è, –Ω–µ–º–Ω–æ–≥–æ –∑–∞–≤—ã—à–∞–µ—Ç –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏)
                    </div>
                `;
            }
        }
        
        // –†–∞—Å—á–µ—Ç BMR –ø–æ —Ñ–æ—Ä–º—É–ª–µ –ú–∏—Ñ—Ñ–ª–∏–Ω–∞-–°–∞–Ω –ñ–µ–æ—Ä–∞
        function calculateMifflinBMR(weight, height, age, gender) {
            let bmr = (10 * weight) + (6.25 * height) - (5 * age);
            
            if (gender === 'female') {
                bmr -= 161;
            } else {
                bmr += 5;
            }
            
            return bmr;
        }
        
        // –†–∞—Å—á–µ—Ç BMR –ø–æ —Ñ–æ—Ä–º—É–ª–µ –•–∞—Ä—Ä–∏—Å–∞-–ë–µ–Ω–µ–¥–∏–∫—Ç–∞
        function calculateHarrisBMR(weight, height, age, gender) {
            if (gender === 'female') {
                return 655.1 + (9.563 * weight) + (1.85 * height) - (4.676 * age);
            } else {
                return 66.5 + (13.75 * weight) + (5.003 * height) - (6.755 * age);
            }
        }
        
        function calculateDCI() {
            if (!userData) {
                alert('–î–ª—è —Ä–∞—Å—á–µ—Ç–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å!');
                return;
            }
            
            // –ü–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ —Ñ–æ—Ä–º—ã
            const activity = parseFloat(document.getElementById('activity').value);
            
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è
            const weight = userData.weight;
            const height = userData.height;
            const age = userData.age;
            const gender = userData.gender;
            
            // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –±–∞–∑–æ–≤—ã–π –º–µ—Ç–∞–±–æ–ª–∏–∑–º (BMR) –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Ñ–æ—Ä–º—É–ª–µ
            let bmr;
            let formulaName;
            
            if (selectedFormula === 'mifflin') {
                bmr = calculateMifflinBMR(weight, height, age, gender);
                formulaName = "–ú–∏—Ñ—Ñ–ª–∏–Ω–∞-–°–∞–Ω –ñ–µ–æ—Ä–∞";
            } else {
                bmr = calculateHarrisBMR(weight, height, age, gender);
                formulaName = "–•–∞—Ä—Ä–∏—Å–∞-–ë–µ–Ω–µ–¥–∏–∫—Ç–∞";
            }
            
            // –£–º–Ω–æ–∂–∞–µ–º –Ω–∞ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
            const dci = Math.round(bmr * activity);
            
            // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –ë–ñ–£ (–≤ –≥—Ä–∞–º–º–∞—Ö)
            const proteinPercent = 0.3;   // 30% –±–µ–ª–∫–∞
            const fatPercent = 0.25;      // 25% –∂–∏—Ä–æ–≤
            const carbsPercent = 0.45;    // 45% —É–≥–ª–µ–≤–æ–¥–æ–≤
            
            // 1–≥ –±–µ–ª–∫–∞ = 4 –∫–∫–∞–ª, 1–≥ –∂–∏—Ä–∞ = 9 –∫–∫–∞–ª, 1–≥ —É–≥–ª–µ–≤–æ–¥–æ–≤ = 4 –∫–∫–∞–ª
            const proteinGrams = Math.round((dci * proteinPercent) / 4);
            const fatGrams = Math.round((dci * fatPercent) / 9);
            const carbsGrams = Math.round((dci * carbsPercent) / 4);
            
            // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
            document.getElementById('dci-result').textContent = dci + ' –∫–∫–∞–ª';
            document.getElementById('formula-used').textContent = '–ü–æ —Ñ–æ—Ä–º—É–ª–µ ' + formulaName;
            document.getElementById('protein-value').textContent = proteinGrams + ' –≥';
            document.getElementById('fat-value').textContent = fatGrams + ' –≥';
            document.getElementById('carbs-value').textContent = carbsGrams + ' –≥';
            
            document.getElementById('protein-percent').textContent = (proteinPercent * 100) + '%';
            document.getElementById('fat-percent').textContent = (fatPercent * 100) + '%';
            document.getElementById('carbs-percent').textContent = (carbsPercent * 100) + '%';
        }
    </script>
</body>
</html>